<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title> : DexterJS</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="../assets_/css/shCore.css">
        <link rel="stylesheet" href="../assets_/css/shThemeDefault.css">
        <link rel="stylesheet" href="../assets_/css/main.css">
    </head>
    <body data-root-path="../">
        <div id="wrapper">
            <div id="content">

<ul id="topnav">
    <li><a href="../index.html">Index</a></li>
    <li><a href="#toc">TOC</a></li>
</ul>
<h2>Table of Contents <a href="#toc" name="toc" class="deep-link">#</a></h2>

<ul>
<li><a href="#Dexter.spy">Dexter.spy()</a></li>
</ul>

<h2>Dexter.spy( namespace, 'functionName'[, callbackFn ] ) <a href="#Dexter.spy" id="Dexter.spy" class="deep-link">#</a></h2>

<p>Setting a spy is an easy way to check for method calls, without preventing their functionality.</p>

<p>This is great to check for called functions inside your tested function.</p>

<p>Suppose you're testing a <code>function foo()</code> which in any moment should call <code>console.log( 'bar' )</code>. You can set your <strong>spy</strong> object like this:</p>

<pre class="brush:javascript">

var spy = Dexter.spy( console, 'log' );
</pre>

<p>And you need to guarantee console.log is called with that <code>'bar'</code> argument, so you can implement a callback function to your spy:</p>

<pre class="brush:javascript">

var spy = Dexter.spy( console, 'log' );
spy.callback = function( arg1 ) {
    // equal is an assertion method based on QUnit
    // you can change it to your best flavor of test framework
    equal( arg1, 'bar', 'arg1 === "bar"' );
};
</pre>

<p>Notice the callback function can also take place as your spy parameter:</p>

<pre class="brush:javascript">

var spy = Dexter.spy( console, 'log', function( arg1 ) {
    equal( arg1, 'bar', 'arg1 === "bar"' );
});
</pre>

<p>BTW, you can also verify the <code>this</code> scope of your spy call</p>

<pre class="brush:javascript">

var spy = Dexter.spy( console, 'log', function() {
    equal( this, window, 'spy this === window' );
});
</pre>

<p>The callback will be triggered every time the spied function is called, and you can also check on how many times that were called.</p>

<pre class="brush:javascript">

function foo() {
    console.log( 'bar' );
}

/*** in your tests: ***/

test( 'foo()', function() {
    var spy = Dexter.spy( console, 'log', function( arg1 ) {
        equal( arg1, 'bar', 'arg1 === "bar"' );
    });

    foo();

    // now we check on how many times console.log were called
    equal( spy.called, 1, 'console.log called once' );

    // restoring console.log
    spy.restore();

    expect( 2 );
});
</pre>

<p>Notice we restored the spied function in the above example, so any further calls of before spied <code>console.log</code> won't affect this spy object.</p>
                <hr />
                <small>Documentation generated by <a href="https://github.com/millermedeiros/mdoc">mdoc</a>.</small>
            </div>
        </div>
        <script src="../assets_/js/lib/jquery.js"></script>
        <script src="../assets_/js/lib/syntax-highlighter/shCore.js"></script>
        <script src="../assets_/js/lib/syntax-highlighter/shAutoloader.js"></script>
        <script src="../assets_/js/main.js"></script>
    </body>
</html>

